<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>nanoLOC Demo Driver: portation/hwclock.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.0 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_860a6933db7822edd664cf8ce41dbd66.html">portation</a></div>
<h1>hwclock.c File Reference</h1>Timer support for AVR. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="config_8h-source.html">config.h</a>&quot;</code><br>
<code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;util/delay.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &quot;<a class="el" href="ntrxtypes_8h-source.html">ntrxtypes.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="hwclock_8h-source.html">hwclock.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="keys_8h-source.html">keys.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="avrport_8h-source.html">avrport.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="portation_8h-source.html">portation.h</a>&quot;</code><br>

<p>
<a href="hwclock_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#5bcf2962d7a37c34484cef13fa9601b2">__OPTIMIZE__</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#42ad198e3e68bcade63e8454f1097575">MAX_DELAY_MS</a>&nbsp;&nbsp;&nbsp;( 262 / ( F_CPU / 1000000UL ))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#8fbb5471f4e03699d46f1f85433d4209">MAX_DELAY_US</a>&nbsp;&nbsp;&nbsp;( 768 / ( F_CPU / 1000000UL ))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#dd3f7099b37520311e01a39330b7d89c">MILLISECONDS_PER_TICK</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#0a57022540a4ec7fa278a95a40314999">STATE_HIGH</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#5ed4dc798cf7dbb26376fa416f776aff">STATE_LOW</a>&nbsp;&nbsp;&nbsp;-5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#77ddeee41ef28a28f42ea963e40ae3b0">TIMER_RELOAD_VALUE</a>&nbsp;&nbsp;&nbsp;(256 - 230)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#85c75e4b3871881e616264e1b87ea259">GetHwclReloadVal</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#20623b49c1ed1dd212ad55448a651a9c">hwclock</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return system clock in milliseconds  <a href="#20623b49c1ed1dd212ad55448a651a9c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#3f8fa222f4976a01d7517c4ab86e7c4b">hwclock_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clock tick initialization  <a href="#3f8fa222f4976a01d7517c4ab86e7c4b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#369bb91cd7b5ed9cc814bfb036fcfe9d">hwclock_tune</a> (int8_t tuningDirection)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modifies the time interval between any two subsequent timer ticks.  <a href="#369bb91cd7b5ed9cc814bfb036fcfe9d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#fc5d36ce3dcdae1762d3d8a42db18c6e">hwclockRestart</a> (uint32_t start)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clock tick initialization  <a href="#fc5d36ce3dcdae1762d3d8a42db18c6e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#c8c1a9f4fefba19cbaa462744963a5f3">hwdelay</a> (uint32_t t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#87f07be0d623932db45b4998f9175e8a">HWDelayms</a> (uint16_t ms)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delay processing for n milliseconds.  <a href="#87f07be0d623932db45b4998f9175e8a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#5f99322ada800b90a8a06d0127b07513">HWDelayus</a> (uint16_t us)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delay processing for n microseconds.  <a href="#5f99322ada800b90a8a06d0127b07513"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#36e1fc2a1ed68d4e87522f60b934922b">KeyUpdate</a> (uint8_t stat, uint8_t id)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update key state.  <a href="#36e1fc2a1ed68d4e87522f60b934922b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#44eda0ab7b65fb527ffed34c9067db4c">SIGNAL</a> (SIG_OVERFLOW0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer 0 overflow interrupt.  <a href="#44eda0ab7b65fb527ffed34c9067db4c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#c58407c538a7142b2decadef472a0ec3">bogo_mips</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#9af5b2ec266f13d0aae274eecedaed5f">hwclTimerReloadVal</a> = TIMER_RELOAD_VALUE</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#b69c774dad0814fa066f807e4aba7fb7">jiffies</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile <a class="el" href="ntrxtypes_8h.html#04dd5074964518403bf944f2b240a5f8">bool_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hwclock_8c.html#96e75ef48ff2fb57ef7f566563bb5887">key_flags</a> [] = { FALSE, FALSE, FALSE }</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Timer support for AVR. 
<p>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2007-Dez-11 </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>S. Rohdemann, S. Radtke <code></code>(C) 2007 Nanotron Technologies</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>BuildNumber = "BuildNumber : 7951";<p>
This file contains the source code for the utility functions of the Hardware Timer Function. </dd></dl>

<p>
Definition in file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="5bcf2962d7a37c34484cef13fa9601b2"></a><!-- doxytag: member="hwclock.c::__OPTIMIZE__" ref="5bcf2962d7a37c34484cef13fa9601b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __OPTIMIZE__&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00017">17</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="42ad198e3e68bcade63e8454f1097575"></a><!-- doxytag: member="hwclock.c::MAX_DELAY_MS" ref="42ad198e3e68bcade63e8454f1097575" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DELAY_MS&nbsp;&nbsp;&nbsp;( 262 / ( F_CPU / 1000000UL ))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00052">52</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="8fbb5471f4e03699d46f1f85433d4209"></a><!-- doxytag: member="hwclock.c::MAX_DELAY_US" ref="8fbb5471f4e03699d46f1f85433d4209" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_DELAY_US&nbsp;&nbsp;&nbsp;( 768 / ( F_CPU / 1000000UL ))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00051">51</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="dd3f7099b37520311e01a39330b7d89c"></a><!-- doxytag: member="hwclock.c::MILLISECONDS_PER_TICK" ref="dd3f7099b37520311e01a39330b7d89c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MILLISECONDS_PER_TICK&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00046">46</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="0a57022540a4ec7fa278a95a40314999"></a><!-- doxytag: member="hwclock.c::STATE_HIGH" ref="0a57022540a4ec7fa278a95a40314999" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_HIGH&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00049">49</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="5ed4dc798cf7dbb26376fa416f776aff"></a><!-- doxytag: member="hwclock.c::STATE_LOW" ref="5ed4dc798cf7dbb26376fa416f776aff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATE_LOW&nbsp;&nbsp;&nbsp;-5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00050">50</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="77ddeee41ef28a28f42ea963e40ae3b0"></a><!-- doxytag: member="hwclock.c::TIMER_RELOAD_VALUE" ref="77ddeee41ef28a28f42ea963e40ae3b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_RELOAD_VALUE&nbsp;&nbsp;&nbsp;(256 - 230)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00042">42</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="85c75e4b3871881e616264e1b87ea259"></a><!-- doxytag: member="hwclock.c::GetHwclReloadVal" ref="85c75e4b3871881e616264e1b87ea259" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t GetHwclReloadVal           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00274">274</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="20623b49c1ed1dd212ad55448a651a9c"></a><!-- doxytag: member="hwclock.c::hwclock" ref="20623b49c1ed1dd212ad55448a651a9c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hwclock           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return system clock in milliseconds 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>time in milliseconds</dd></dl>
This function returns the elapsed time since program start in milliseconds. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00223">223</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="3f8fa222f4976a01d7517c4ab86e7c4b"></a><!-- doxytag: member="hwclock.c::hwclock_init" ref="3f8fa222f4976a01d7517c4ab86e7c4b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hwclock_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
clock tick initialization 
<p>
This function initializes the Timer 0 in the AVR to generate an interrupt ever 10 ms. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00196">196</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="369bb91cd7b5ed9cc814bfb036fcfe9d"></a><!-- doxytag: member="hwclock.c::hwclock_tune" ref="369bb91cd7b5ed9cc814bfb036fcfe9d" args="(int8_t tuningDirection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hwclock_tune           </td>
          <td>(</td>
          <td class="paramtype">int8_t&nbsp;</td>
          <td class="paramname"> <em>tuningDirection</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modifies the time interval between any two subsequent timer ticks. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tuningDirection</em>&nbsp;</td><td>+1 to speed up the hwclock, -1 to speed down, 0 to reset to default. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00241">241</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="fc5d36ce3dcdae1762d3d8a42db18c6e"></a><!-- doxytag: member="hwclock.c::hwclockRestart" ref="fc5d36ce3dcdae1762d3d8a42db18c6e" args="(uint32_t start)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hwclockRestart           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>start</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
clock tick initialization 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>this is the start value for jiffies</td></tr>
  </table>
</dl>
This function initializes the Timer 0 in the AVR to generate an interrupt ever 10 ms. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00171">171</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="c8c1a9f4fefba19cbaa462744963a5f3"></a><!-- doxytag: member="hwclock.c::hwdelay" ref="c8c1a9f4fefba19cbaa462744963a5f3" args="(uint32_t t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hwdelay           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deprecated function please dont use for new projects 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00066">66</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="87f07be0d623932db45b4998f9175e8a"></a><!-- doxytag: member="hwclock.c::HWDelayms" ref="87f07be0d623932db45b4998f9175e8a" args="(uint16_t ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HWDelayms           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>ms</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delay processing for n milliseconds. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ms</em>&nbsp;</td><td>this is the delay in milliseconds</td></tr>
  </table>
</dl>
This function is used for waiting TIMER_RELOAD_VALUEbefore continue with programm execution. Interrupts are still processed. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00134">134</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="5f99322ada800b90a8a06d0127b07513"></a><!-- doxytag: member="hwclock.c::HWDelayus" ref="5f99322ada800b90a8a06d0127b07513" args="(uint16_t us)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HWDelayus           </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>us</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delay processing for n microseconds. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>us</em>&nbsp;</td><td>this is the delay in microseconds</td></tr>
  </table>
</dl>
This function is used for waiting before continue with programm execution. Interrupts are still processed. Because of the high inaccuracy of the delay function this function tries to compensate the delay error by adding an offset. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00089">89</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="36e1fc2a1ed68d4e87522f60b934922b"></a><!-- doxytag: member="hwclock.c::KeyUpdate" ref="36e1fc2a1ed68d4e87522f60b934922b" args="(uint8_t stat, uint8_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KeyUpdate           </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update key state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stat</em>&nbsp;</td><td>this is the logic level of the key port </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>this is the index of the keylist</td></tr>
  </table>
</dl>
This function updates the keystate every 10ms. The main purpose is to eliminate key bouncing. 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00290">290</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="44eda0ab7b65fb527ffed34c9067db4c"></a><!-- doxytag: member="hwclock.c::SIGNAL" ref="44eda0ab7b65fb527ffed34c9067db4c" args="(SIG_OVERFLOW0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SIGNAL           </td>
          <td>(</td>
          <td class="paramtype">SIG_OVERFLOW0&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Timer 0 overflow interrupt. 
<p>
Interrupt service routine for the hardware timer 
<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00328">328</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="c58407c538a7142b2decadef472a0ec3"></a><!-- doxytag: member="hwclock.c::bogo_mips" ref="c58407c538a7142b2decadef472a0ec3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="hwclock_8c.html#c58407c538a7142b2decadef472a0ec3">bogo_mips</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00056">56</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="9af5b2ec266f13d0aae274eecedaed5f"></a><!-- doxytag: member="hwclock.c::hwclTimerReloadVal" ref="9af5b2ec266f13d0aae274eecedaed5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="hwclock_8c.html#9af5b2ec266f13d0aae274eecedaed5f">hwclTimerReloadVal</a> = TIMER_RELOAD_VALUE<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00057">57</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="b69c774dad0814fa066f807e4aba7fb7"></a><!-- doxytag: member="hwclock.c::jiffies" ref="b69c774dad0814fa066f807e4aba7fb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t <a class="el" href="hwclock_8c.html#b69c774dad0814fa066f807e4aba7fb7">jiffies</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00055">55</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<a class="anchor" name="96e75ef48ff2fb57ef7f566563bb5887"></a><!-- doxytag: member="hwclock.c::key_flags" ref="96e75ef48ff2fb57ef7f566563bb5887" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="ntrxtypes_8h.html#04dd5074964518403bf944f2b240a5f8">bool_t</a> <a class="el" href="hwclock_8c.html#96e75ef48ff2fb57ef7f566563bb5887">key_flags</a>[] = { FALSE, FALSE, FALSE }          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="hwclock_8c-source.html#l00054">54</a> of file <a class="el" href="hwclock_8c-source.html">hwclock.c</a>.
</div>
</div><p>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title></title>
	</head>
<body bgcolor="#ffffff"><img src="blind.gif" width="20" height="20">
</body>
</html>
